<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EchoMe X - Create Your AI Twin</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="page-wrapper">
        <!-- Header -->
        <header class="header">
            <nav class="navbar">
                <div class="nav-container">
                    <div class="nav-brand">
                        <a href="index.html" class="nav-logo">
                            <div class="logo-icon">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z"/>
                                </svg>
                            </div>
                            <span class="logo-text">EchoMe X</span>
                        </a>
                    </div>
                    
                    <ul class="nav-menu">
                        <li><a href="index.html" class="nav-link active">Home</a></li>
                        <li><a href="chat.html" class="nav-link">Chat</a></li>
                        <li><a href="analytics.html" class="nav-link">Analytics</a></li>
                    </ul>
                    
                    <button class="nav-toggle d-md-block d-none">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="landing-section">
            <div class="container">
                <div class="landing-content">
                    <h1 class="landing-title animate-fade-in">
                        Create Your AI Twin
                    </h1>
                    <p class="landing-subtitle animate-fade-in">
                        Build an intelligent digital version of yourself that learns, adapts, and interacts just like you do.
                    </p>

                    <!-- Twin Creation Form -->
                    <div class="twin-form animate-fade-in" id="twinForm">
                        <h2 class="form-title">Generate Your Twin</h2>
                        
                        <form id="createTwinForm" class="needs-validation" novalidate>
                            <div class="form-group">
                                <label for="name" class="form-label required">Twin Name</label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    class="form-input" 
                                    placeholder="Enter your twin's name" 
                                    required
                                    maxlength="50"
                                >
                                <div class="form-error" id="nameError"></div>
                            </div>

                            <div class="form-group">
                                <label for="persona" class="form-label required">Persona Description (minimum 50 characters)</label>
                                <textarea 
                                    id="persona" 
                                    name="persona" 
                                    class="form-textarea" 
                                    placeholder="Describe your personality, interests, and how you like to communicate..." 
                                    required
                                    minlength="50"
                                    maxlength="500"
                                    rows="4"
                                ></textarea>
                                <div class="d-flex justify-between align-center mt-xs">
                                    <div class="form-error" id="personaError"></div>
                                    <small class="text-muted">
                                        <span id="charCount">0</span>/500 characters
                                    </small>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100 hover-lift">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z"/>
                                </svg>
                                Generate My Twin
                            </button>
                        </form>
                    </div>

                    <!-- Loading State -->
                    <div class="loading-state d-none" id="loadingState">
                        <div class="spinner spinner-lg"></div>
                        <h3 class="loading-text">Generating your twin...</h3>
                        <p class="loading-subtext">This may take a few moments while we create your AI twin</p>
                    </div>

                    <!-- Features Preview -->
                    <div class="features-preview mt-3xl">
                        <div class="grid grid-3 md:grid-1">
                            <div class="card hover-lift">
                                <div class="card-header text-center">
                                    <div class="feature-icon mx-auto mb-lg">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9Z"/>
                                        </svg>
                                    </div>
                                </div>
                                <h3 class="card-title">Intelligent Conversations</h3>
                                <p class="card-description">
                                    Your twin learns from your personality and responds authentically to any question.
                                </p>
                            </div>

                            <div class="card hover-lift">
                                <div class="card-header text-center">
                                    <div class="feature-icon mx-auto mb-lg">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z"/>
                                        </svg>
                                    </div>
                                </div>
                                <h3 class="card-title">Analytics Dashboard</h3>
                                <p class="card-description">
                                    Track engagement, interactions, and see how your twin is performing.
                                </p>
                            </div>

                            <div class="card hover-lift">
                                <div class="card-header text-center">
                                    <div class="feature-icon mx-auto mb-lg">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2ZM12 8C13.1 8 14 8.9 14 10S13.1 12 12 12 10 11.1 10 10 10.9 8 12 8ZM18 14C16.68 16.64 14.5 18.4 12 18.4S7.32 16.64 6 14C6.89 13.11 8.07 12.5 9.4 12.14C9.78 12.05 10.2 12 10.65 12H13.35C13.8 12 14.22 12.05 14.6 12.14C15.93 12.5 17.11 13.11 18 14Z"/>
                                        </svg>
                                    </div>
                                </div>
                                <h3 class="card-title">Secure & Private</h3>
                                <p class="card-description">
                                    Your data is encrypted and protected with enterprise-grade security.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <div class="toast-icon" id="toastIcon">
                <!-- Icon will be injected here -->
            </div>
            <div class="toast-message">
                <div class="toast-title" id="toastTitle">Success</div>
                <div class="toast-description" id="toastDescription">Your twin has been created successfully!</div>
            </div>
            <button class="toast-close" id="toastClose">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                </svg>
            </button>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="landing.js"></script>
    <script src="js/api.js"></script>
    <script>
    // Test the connection when page loads
    document.addEventListener('DOMContentLoaded', function() {
      console.log('🔗 Testing backend connection...');
      
      // Test form submission if it exists
      const form = document.querySelector('form');
      if (form) {
        form.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const formData = new FormData(form);
          const name = formData.get('name');
          const persona = formData.get('persona');
          
          console.log('📝 Form data:', { name, persona });
          
          try {
            const result = await window.echoAPI.createTwin(name, persona);
            console.log('✅ Twin created:', result);
            alert('Twin created successfully!');
          } catch (error) {
            console.error('❌ Error creating twin:', error);
            alert('Error: ' + error.message);
          }
        });
      }
    });
    </script>
</body>
</html>